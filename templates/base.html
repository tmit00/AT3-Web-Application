<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Application{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>

    {% block extra_head %}{% endblock %}
</head>
<body>
    <div class="sidebar">
        <h2>Menu</h2>
        <ul>
            <li><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
            <li><a href="{{ url_for('calendar_routes.calendar_server') }}">Calendar</a></li>
            <li><a href="{{ url_for('todo_routes.pomodoro') }}">Pomodoro Timer</a></li>
        </ul>
        <!-- Logout button at the bottom -->
        <div class="logout-container">
            <a href="{{ url_for('logout') }}" class="logout-button">Logout</a>
        </div>
    </div>
    <div class="main-content">
        {% block content %}{% endblock %}
    </div>
    {% if not hide_mini_timer %}
    <!-- Popout Pomodoro Timer -->
    <div id="popout-pomodoro-timer" style="display:none;">
        <div class="popout-header">
            <div class="popout-drag-handle">‚ãÆ‚ãÆ</div>
            <div class="popout-controls">
                <button id="popout-minimize-btn" class="popout-control-btn">‚àí</button>
                <button id="popout-close-btn" class="popout-control-btn">√ó</button>
            </div>
        </div>
        <div class="popout-content" id="popout-content">
            <div class="popout-progress-container">
                <svg id="popout-progress-ring" width="80" height="80">
                    <circle cx="40" cy="40" r="35" stroke="#f0f0f0" stroke-width="6" fill="none"/>
                    <circle id="popout-progress-bar" cx="40" cy="40" r="35" stroke="#43e97b" stroke-width="6" 
                            fill="none" stroke-linecap="round" style="transition: stroke-dashoffset 0.5s;"/>
                </svg>
                <div class="popout-timer-display">
                    <div id="popout-timer-time">25:00</div>
                    <div id="popout-timer-mode">Work</div>
                </div>
            </div>
            <div class="popout-task-info" id="popout-task-info" style="display:none;">
                <span id="popout-task-name">No task selected</span>
            </div>
            <div class="popout-buttons">
                <button id="popout-start-btn" class="popout-btn primary">‚ñ∂</button>
                <button id="popout-pause-btn" class="popout-btn secondary">‚è∏</button>
                <button id="popout-reset-btn" class="popout-btn danger">‚èπ</button>
                <button id="popout-games-btn" class="popout-btn games disabled" title="Games are only available during breaks">üéÆ</button>
                <button id="popout-expand-btn" class="popout-btn expand">‚õ∂</button>
            </div>
            <div class="popout-cycle-info">
                <span id="popout-cycle-text">Pomodoro 1 of 4</span>
            </div>
        </div>
        <div class="popout-minimized" id="popout-minimized" style="display:none;">
            <div id="popout-mini-time">25:00</div>
            <div id="popout-mini-mode">Work</div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='javascript/popout-timer.js') }}"></script>
    {% endif %}
</body>
</html>